name: return-dispatch

on:
  workflow_dispatch:

jobs:
  send-report:
    runs-on: ubuntu-latest

    steps:
      - name: Run test
        run: echo "Start test"

      - name: Dispatch an action and get the run ID and URL
        uses: codex-/return-dispatch@v1
        id: return_dispatch
        with:
          token: ${{ secrets.TOKEN }} # Note this is NOT GITHUB_TOKEN but a PAT
          ref: master # or refs/heads/target_branch
          repo: experiment
          owner: firmanrosid
          workflow: test.yml
          # workflow_inputs: '{ "run_id": ${{ github.run_id }} }' # Optional
          workflow_timeout_seconds: 60 # Default: 300

      - name: Use the output run ID and URL
        run: |
          echo ${{steps.return_dispatch.outputs.run_id}}
          echo ${{steps.return_dispatch.outputs.run_url}}
